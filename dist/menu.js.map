{"version":3,"file":"menu.js","mappings":"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","sources":["webpack://deliveryfood/./src/modules/auth.js","webpack://deliveryfood/./src/menu.js","webpack://deliveryfood/./src/modules/secondMenu.js","webpack://deliveryfood/./src/modules/cart.js"],"sourcesContent":["const auth = () => {\r\n    const btnAuth = document.querySelector('.button-auth');\r\n    const modalAuth = document.querySelector('.modal-auth')\r\n    const closeAuthModal = document.querySelector('.close-auth')\r\n    const logInForm = document.getElementById('logInForm')\r\n    const modalDialogAuth = document.querySelector('.modal-dialog-auth')\r\n    const btnLogin = document.querySelector('.button-login')\r\n    const loginInput = document.getElementById('login')\r\n    const passwordInput = document.getElementById('password')\r\n    const btnOut = document.querySelector('.button-out')\r\n    const userName = document.querySelector('.user-name')\r\n    const cartBtn = document.getElementById('cart-button')\r\n\r\n    btnAuth.addEventListener('click', () => {\r\n        modalAuth.style.display = 'flex'\r\n    })\r\n\r\n    closeAuthModal.addEventListener('click', () => {\r\n        modalAuth.style.display = 'none'\r\n    })\r\n\r\n    btnOut.addEventListener('click', () => {\r\n        logout()\r\n    })\r\n\r\n    const login = (user) => {\r\n        btnAuth.style.display = 'none'\r\n        btnOut.style.display = 'flex'\r\n        userName.style.display = 'flex'\r\n        userName.textContent = user.login\r\n        modalAuth.style.display = 'none'\r\n        cartBtn.style.display = 'flex'\r\n\r\n        if (user.login === \"\") {\r\n            alert('введите логин')\r\n            userName.textContent = \"\"\r\n            btnAuth.style.display = 'flex';\r\n            btnOut.style.display = 'none';\r\n            modalAuth.style.display = 'flex';\r\n            localStorage.removeItem(\"user\");\r\n        }\r\n    }\r\n\r\n    const logout = () => {\r\n        btnAuth.style.display = 'flex'\r\n        btnOut.style.display = 'none'\r\n        userName.style.display = 'none'\r\n        userName.textContent = ' ';\r\n        localStorage.removeItem('user')\r\n        cartBtn.style.display = 'none'\r\n    }\r\n\r\n    logInForm.addEventListener('submit', (e) => {\r\n        e.preventDefault()\r\n        const user = {\r\n            login: loginInput.value,\r\n            password: passwordInput.value,\r\n        }\r\n\r\n        localStorage.setItem('user', JSON.stringify(user))\r\n        login(user)\r\n    })\r\n\r\n    if (localStorage.getItem('user')) {\r\n        login(JSON.parse(localStorage.getItem('user')))\r\n    }\r\n}\r\n\r\nexport default auth","import auth from \"./modules/auth\"\r\nimport secondMenu from \"./modules/secondMenu\"\r\nimport cart from \"./modules/cart\"\r\n\r\n\r\n\r\nauth()\r\nsecondMenu()\r\ncart()","const secondMenu = () => {\r\n    const cardsMenu = document.querySelector('.cards-menu')\r\n    const sectionMenu = document.querySelector('.menu')\r\n    const changeTitle = (restourant) => {\r\n\r\n        const section = document.createElement('div')\r\n        section.classList.add('section-heading')\r\n\r\n        section.innerHTML = `\r\n            <h2 class=\"section-title restaurant-title\">${restourant.name}</h2>\r\n                    <div class=\"card-info\">\r\n                        <div class=\"rating\">\r\n                        ${restourant.stars}\r\n                        </div>\r\n                        <div class=\"price\">От  ${restourant.price} ₽</div>\r\n                        <div class=\"category\">${restourant.kitchen}</div>\r\n                    </div>\r\n                    `\r\n\r\n        sectionMenu.prepend(section)\r\n    }\r\n    const cartArr = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : []\r\n\r\n    const addToCart = (cartItem) => {\r\n\r\n        if (cartArr.some((item) => item.id === cartItem.id)) {\r\n            cartArr.map((item => {\r\n                if (item.id === cartItem.id) {\r\n                    item.count++\r\n                }\r\n\r\n                return item\r\n            }))\r\n        } else {\r\n            cartArr.push(cartItem)\r\n        }\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cartArr))\r\n    }\r\n\r\n    const renderItems = (data) => {\r\n        data.forEach(({ id, name, description, price, image }) => {\r\n            const card = document.createElement('div')\r\n            card.classList.add('card')\r\n\r\n            card.innerHTML = ` \r\n            <img src=\"${image}\" alt=\"${name}\" class=\"card-image\" />\r\n            <div class=\"card-text\">\r\n                <div class=\"card-heading\">\r\n                    <h3 class=\"card-title card-title-reg\">${name}</h3>\r\n                </div>\r\n                <div class=\"card-info\">\r\n                    <div class=\"ingredients\">${description}\r\n                    </div>\r\n                </div>\r\n                <div class=\"card-buttons\">\r\n                    <button class=\"button button-primary button-add-cart\">\r\n                        <span class=\"button-card-text\">В корзину</span>\r\n                        <span class=\"button-cart-svg\"></span>\r\n                    </button>\r\n                    <strong class=\"card-price-bold\">${price}₽</strong>\r\n                </div>\r\n            </div>\r\n        \r\n            `\r\n\r\n            card.querySelector('.button-add-cart').addEventListener('click', () => {\r\n                addToCart({ name, price, id, count: 1 })\r\n\r\n            })\r\n\r\n            cardsMenu.append(card)\r\n        })\r\n    }\r\n\r\n    if (localStorage.getItem('restourant')) {\r\n        const restourant = JSON.parse(localStorage.getItem('restourant'))\r\n\r\n        changeTitle(restourant)\r\n\r\n        fetch(`./db/${restourant.products}`)\r\n            .then(response => response.json())\r\n            .then(data => renderItems(data))\r\n            .catch((error) => {\r\n                console.log(error)\r\n            })\r\n    } else {\r\n        window.location.href = '/'\r\n    }\r\n\r\n}\r\nexport default secondMenu","const cart = () => {\r\n    const btnCart = document.getElementById('cart-button')\r\n    const modalCart = document.querySelector('.modal-cart')\r\n    const close = modalCart.querySelector('.close')\r\n    const modalBody = modalCart.querySelector('.modal-body')\r\n    const clearCart = modalCart.querySelector('.clear-cart')\r\n    const modalPrice = modalCart.querySelector('.modal-pricetag')\r\n    const foodPrice = modalCart.querySelector('.food-price')\r\n\r\n\r\n    const countInc = (id) => {\r\n        const cartArray = JSON.parse(localStorage.getItem('cart'))\r\n        cartArray.map((item) => {\r\n            if (item.id === id) {\r\n                item.count++\r\n            }\r\n            return item\r\n        })\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cartArray))\r\n        renderItems(cartArray)\r\n        cartSumPrice(JSON.parse(localStorage.getItem('cart')))\r\n        cartFoodPrice(JSON.parse(localStorage.getItem('cart')))\r\n    }\r\n\r\n\r\n    const countDec = (id) => {\r\n        const cartArray = JSON.parse(localStorage.getItem('cart'))\r\n        cartArray.map((item) => {\r\n            if (item.id === id) {\r\n                item.count = item.count > 0 ? item.count - 1 : 0\r\n            }\r\n            return item\r\n        })\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cartArray))\r\n        renderItems(cartArray)\r\n        cartSumPrice(JSON.parse(localStorage.getItem('cart')))\r\n        cartFoodPrice(JSON.parse(localStorage.getItem('cart')))\r\n    }\r\n\r\n    const renderItems = (data) => {\r\n        modalBody.innerHTML = ''\r\n\r\n        data.forEach(({ price, count, id, name }) => {\r\n            const CartRow = document.createElement('div')\r\n            CartRow.classList.add('food-row')\r\n\r\n            CartRow.innerHTML = `\r\n                    <span class=\"food-name\">${name}</span>\r\n                    <strong class=\"food-price\">${price} ₽</strong>\r\n                    <div class=\"food-counter\">\r\n                        <button class=\"counter-button btn-dec\" data-index=\"${id}\">-</button>\r\n                        <span class=\"counter\">${count}</span>\r\n                        <button class=\"counter-button btn-inc\" data-index=\"${id}\">+</button>\r\n                    `\r\n\r\n            modalBody.prepend(CartRow)\r\n        });\r\n    }\r\n\r\n    const cartSumPrice = (data) => {\r\n        let priceArr = []\r\n\r\n        data.forEach(({ price, count }) => {\r\n            let sumArr = price * count\r\n            priceArr.push(sumArr)\r\n\r\n\r\n        })\r\n        const res = priceArr.reduce((acc, inc) => acc + inc, 0)\r\n        modalPrice.textContent = `${res}`\r\n\r\n\r\n    }\r\n\r\n\r\n    const cartFoodPrice = (data) => {\r\n        let priceCart = []\r\n            // data.forEach(({ price, count, id }) => {\r\n\r\n        //     if (id ) {\r\n        //         let priceFood = price * count\r\n        //         priceCart.push(priceFood)\r\n        //     }\r\n\r\n        //     //    if (id == price)\r\n\r\n\r\n        // })\r\n\r\n\r\n        // let emptyArr = []\r\n        // priceCart.map((value, i) => {\r\n        //     if (value === priceCart[i]) {\r\n        //         let result = value\r\n\r\n        //         emptyArr.push(result)\r\n        //     }\r\n        // })\r\n\r\n        // emptyArr.filter((value, i) => {\r\n\r\n        //     if ()\r\n\r\n        //     // foodPrice.textContent = `${emptyArr}`\r\n        // })\r\n    }\r\n\r\n\r\n    modalBody.addEventListener('click', (e) => {\r\n        e.preventDefault()\r\n        if (e.target.classList.contains('btn-inc')) {\r\n            countInc(e.target.dataset.index);\r\n        } else if (e.target.classList.contains('btn-dec')) {\r\n            countDec(e.target.dataset.index);\r\n        };\r\n    })\r\n\r\n    btnCart.addEventListener('click', () => {\r\n        modalCart.classList.add('is-open')\r\n\r\n        if (localStorage.getItem('cart')) {\r\n            renderItems(JSON.parse(localStorage.getItem('cart')))\r\n            cartSumPrice(JSON.parse(localStorage.getItem('cart')))\r\n            cartFoodPrice(JSON.parse(localStorage.getItem('cart')))\r\n        }\r\n\r\n    })\r\n    close.addEventListener('click', () => {\r\n        modalCart.classList.remove('is-open')\r\n\r\n    })\r\n}\r\n\r\nexport default cart"],"names":["btnAuth","document","querySelector","modalAuth","closeAuthModal","logInForm","getElementById","loginInput","passwordInput","btnOut","userName","cartBtn","addEventListener","style","display","logout","login","user","textContent","alert","localStorage","removeItem","e","preventDefault","value","password","setItem","JSON","stringify","getItem","parse","cardsMenu","sectionMenu","cartArr","restourant","section","createElement","classList","add","innerHTML","name","stars","price","kitchen","prepend","changeTitle","fetch","products","then","response","json","data","forEach","id","description","image","card","cartItem","count","some","item","map","push","append","renderItems","catch","error","console","log","window","location","href","btnCart","modalCart","close","modalBody","modalPrice","CartRow","cartSumPrice","priceArr","sumArr","res","reduce","acc","inc","target","contains","cartArray","countInc","dataset","index","countDec","remove"],"sourceRoot":""}